{namespace f=TYPO3\\CMS\\Fluid\\ViewHelpers}
<f:layout name="Default" />

<f:section name="Main">
    <section class="ce ce-slider" data-component="site-slider">
        <div class="ce-slider__header">
            <f:if condition="{data.header}">
                <h2>{data.header}</h2>
            </f:if>
            <f:if condition="{data.subheader}">
                <p>{data.subheader}</p>
            </f:if>
            <f:if condition="{data.bodytext}">
                <p class="ce-slider__lead">{data.bodytext}</p>
            </f:if>
        </div>

        <div class="ce-slider__viewport" data-slider-viewport>
            <f:for each="{flexform.slides.slideItems}" as="slide" iteration="iterator">
                <article class="ce-slider__slide" data-slide-index="{iterator.index}" data-slide-active="{f:if(condition: iterator.isFirst, then: 1, else: 0)}">
                    <div class="ce-slider__image">
                        <f:if condition="{slide.image}">
                            <f:then>
                                <img src="{slide.image}" alt="{slide.name}" loading="lazy" />
                            </f:then>
                            <f:else>
                                <f:if condition="{files}">
                                    <f:for each="{files}" as="file" iteration="fileIterator">
                                        <f:if condition="{fileIterator.index} == {iterator.index}">
                                            <img src="{file.publicUrl}" alt="{file.properties.alternative}" loading="lazy" />
                                        </f:if>
                                    </f:for>
                                </f:if>
                            </f:else>
                        </f:if>
                    </div>
                    <div class="ce-slider__content">
                        <f:if condition="{slide.name}">
                            <h3>{slide.name}</h3>
                        </f:if>
                        <f:if condition="{slide.position}">
                            <p class="ce-slider__position">{slide.position}</p>
                        </f:if>
                        <f:if condition="{slide.quote}">
                            <blockquote>{slide.quote}</blockquote>
                        </f:if>
                        <f:if condition="{slide.link}">
                            <f:link.typolink parameter="{slide.link}" class="btn btn--primary">
                                {f:translate(key: 'content.slider.cta', extensionName: 'site_template')}
                            </f:link.typolink>
                        </f:if>
                    </div>
                </article>
            </f:for>
        </div>

        <div class="ce-slider__controls">
            <button type="button" class="ce-slider__control" data-slider-action="prev" aria-label="{f:translate(key: 'content.slider.prev', extensionName: 'site_template')}">◀</button>
            <button type="button" class="ce-slider__control" data-slider-action="next" aria-label="{f:translate(key: 'content.slider.next', extensionName: 'site_template')}">▶</button>
        </div>

        <div class="ce-slider__dots" data-slider-dots>
            <f:for each="{flexform.slides.slideItems}" as="slide" iteration="iterator">
                <button type="button" class="ce-slider__dot {f:if(condition: iterator.isFirst, then: 'is-active', else: '')}" data-slider-target="{iterator.index}" aria-label="{f:translate(key: 'content.slider.goto', extensionName: 'site_template')} {iterator.cycle}" />
            </f:for>
        </div>
    </section>
</f:section>
